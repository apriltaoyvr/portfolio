---
import H1 from '../../components/ui/h1.astro';
import InfoLayout from '../../layouts/InfoLayout.astro';
import { StaticMeshGradient } from '@paper-design/shaders-react';

import professional from '../../content/fr/projects/professional.json';
import personal from '../../content/fr/projects/personal.json';
import contributions from '../../content/fr/projects/contributions.json';

const sections = [
  { label: 'Professionnel', items: professional },
  { label: 'Personnel', items: personal },
  { label: 'Contributions', items: contributions },
];
---

<InfoLayout>
  <div class='p-4 sm:pt-8 sm:px-12 pb-20 min-h-dvh'>
    <H1>Projets</H1>

    {
      sections.map((section) => (
        <>
          <h2 class='mt-8 sm:mt-12 text-3xl font-semibold text-zinc-100'>
            {section.label}
          </h2>
          <ul class='mt-4 grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-8'>
            {section.items.map((project) => (
              <li>
                {project.src ?
                  <img
                    src={project.src}
                    alt={project.title}
                    class='aspect-[1/1.33] object-center object-cover rounded-lg shadow-lg mb-4 sm:mb-0 sm:mr-4'
                  />
                : <StaticMeshGradient
                    width={235}
                    height={312}
                    colors={[
                      '#ae68fd',
                      '#629fea',
                      '#9597f3',
                      '#ebb489',
                      '#f38190',
                    ]}
                    positions={14}
                    waveX={0.45}
                    waveXShift={0}
                    waveY={1}
                    waveYShift={0}
                    mixing={0.11}
                    grainMixer={0.33}
                    grainOverlay={0.26}
                    client:load
                  />
                }
                <div class='p-1 sm:p-2'>
                  {project.href ?
                    <a
                      href={project.href}
                      target='_blank'
                      rel='noopener noreferrer'
                      class='flex flex-row gap-1 place-items-center text-lg text-zinc-100 underline underline-offset-4 hover:text-zinc-300'
                    >
                      {project.title}{' '}
                      <svg
                        xmlns='http://www.w3.org/2000/svg'
                        fill='none'
                        viewBox='0 0 24 24'
                        stroke-width='1.5'
                        stroke='currentColor'
                        class='size-4'
                      >
                        <path
                          stroke-linecap='round'
                          stroke-linejoin='round'
                          d='m4.5 19.5 15-15m0 0H8.25m11.25 0v11.25'
                        />
                      </svg>
                    </a>
                  : <h3 class='text-lg text-zinc-100'>{project.title}</h3>}
                  {'position' in project && (
                    <p class='text-sm text-zinc-300'>{project.position}</p>
                  )}
                  <p class='text-sm text-zinc-400 text-balance'>
                    {project.desc}
                  </p>
                  <div class='mt-2 flex flex-wrap gap-2'>
                    {project.skills.map((skill) => (
                      <span class='text-xs text-zinc-400 bg-zinc-800 rounded px-2 py-0.5'>
                        {skill}
                      </span>
                    ))}
                  </div>
                </div>
              </li>
            ))}
          </ul>
        </>
      ))
    }
  </div>
</InfoLayout>
